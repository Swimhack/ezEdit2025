<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Code Editor - EzEdit</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="css/editor.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="editor-page">
  <header class="header">
    <div class="container">
      <div class="flex justify-between items-center">
        <h1 class="logo">
          <a href="/dashboard.html">
            <span class="logo-icon">Ez</span> <span class="logo-text">Edit.co</span>
          </a>
        </h1>
        <nav class="nav-main">
          <a href="/dashboard.html">Dashboard</a>
          <a href="/editor.html" class="active">Editor</a>
          <a href="/settings.html">Settings</a>
        </nav>
        <div class="user-menu">
          <span class="user-email text-sm text-muted">user@example.com</span>
          <button class="theme-toggle" aria-label="Toggle dark mode">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
          </button>
        </div>
      </div>
    </div>
  </header>

  <div class="editor-layout">
    <!-- File Explorer Sidebar -->
    <aside class="file-explorer" id="file-explorer">
      <div class="file-explorer-header">
        <h3>Files</h3>
        <div class="file-actions">
          <button class="btn-icon" id="new-file" title="New File">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line></svg>
          </button>
          <button class="btn-icon" id="new-folder" title="New Folder">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line></svg>
          </button>
          <button class="btn-icon" id="refresh-files" title="Refresh">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
          </button>
        </div>
      </div>
      <div class="file-explorer-breadcrumb">
        <span class="breadcrumb-item">example.com</span>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-item">public_html</span>
      </div>
      <div class="file-tree" id="file-tree">
        <!-- File tree will be populated dynamically -->
        <ul class="tree-root">
          <li class="tree-item folder expanded">
            <div class="tree-item-header">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>
              <span>public_html</span>
            </div>
            <ul>
              <li class="tree-item folder">
                <div class="tree-item-header">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>
                  <span>css</span>
                </div>
              </li>
              <li class="tree-item folder">
                <div class="tree-item-header">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>
                  <span>js</span>
                </div>
              </li>
              <li class="tree-item file active">
                <div class="tree-item-header">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>
                  <span>index.html</span>
                </div>
              </li>
              <li class="tree-item file">
                <div class="tree-item-header">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>
                  <span>style.css</span>
                </div>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </aside>

    <!-- Main Editor Area -->
    <main class="editor-main">
      <div class="editor-toolbar">
        <div class="file-path">
          <span>public_html/index.html</span>
        </div>
        <div class="editor-actions">
          <button class="btn btn-sm" id="toggle-preview" title="Toggle Preview">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
            Preview
          </button>
          <button class="btn btn-sm btn-outline" id="toggle-ai" title="Toggle AI Assistant">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
            AI Help
          </button>
          <button class="btn btn-sm btn-accent" id="save-file" title="Save File">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
            Save
          </button>
        </div>
      </div>

      <div class="editor-container">
        <div class="monaco-container" id="monaco-editor">
          <!-- Monaco editor will be loaded here -->
        </div>
      </div>
    </main>

    <!-- AI Assistant Sidebar (Klein) -->
    <aside class="ai-sidebar" id="ai-sidebar">
      <div class="ai-sidebar-header">
        <h3>Klein AI Assistant</h3>
        <button class="btn-icon" id="close-ai">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
      </div>
      <div class="ai-chat">
        <div class="ai-messages" id="ai-messages">
          <div class="ai-message">
            <div class="ai-avatar">K</div>
            <div class="ai-content">
              <p>Hello! I'm Klein, your AI coding assistant. I can help you with:</p>
              <ul>
                <li>Explaining code</li>
                <li>Suggesting improvements</li>
                <li>Fixing bugs</li>
                <li>Adding new features</li>
              </ul>
              <p>What would you like help with today?</p>
            </div>
          </div>
        </div>
        <div class="ai-input">
          <textarea id="ai-prompt" placeholder="Ask Klein for help..."></textarea>
          <button class="btn-icon" id="send-prompt">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
          </button>
        </div>
      </div>
    </aside>

    <!-- Preview Panel -->
    <aside class="preview-panel" id="preview-panel">
      <div class="preview-header">
        <h3>Live Preview</h3>
        <div class="preview-actions">
          <button class="btn-icon" id="refresh-preview" title="Refresh Preview">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
          </button>
          <button class="btn-icon" id="close-preview">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
          </button>
        </div>
      </div>
      <div class="preview-content">
        <iframe id="preview-iframe" src="about:blank"></iframe>
      </div>
    </aside>
  </div>

  <!-- Free Trial Upgrade Modal -->
  <div class="modal" id="upgrade-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Upgrade to Pro</h2>
        <button class="modal-close" id="close-upgrade-modal">×</button>
      </div>
      <div class="modal-body">
        <div class="upgrade-content">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line></svg>
          <h3>Save & Publish with Pro</h3>
          <p>Your free trial allows viewing and previewing files. Upgrade to Pro to save changes and publish your site.</p>
          <ul class="feature-list">
            <li>Unlimited sites</li>
            <li>Save & publish to FTP</li>
            <li>AI-powered code assistance</li>
            <li>Priority support</li>
          </ul>
          <div class="pricing">
            <span class="price">$50</span>
            <span class="period">/month</span>
          </div>
          <button class="btn btn-lg btn-accent" id="upgrade-btn">Upgrade Now</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Save Success Modal -->
  <div class="modal" id="save-success-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>File Saved</h2>
        <button class="modal-close" id="close-save-modal">×</button>
      </div>
      <div class="modal-body">
        <div class="save-success">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
          <h3>Changes Saved Successfully</h3>
          <p>Your changes have been saved to the server.</p>
          <button class="btn btn-primary" id="close-success-btn">Continue Editing</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs/loader.min.js"></script>
  <script src="js/editor.js" defer></script>
</body>
</html>
