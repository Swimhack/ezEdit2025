<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deploy to DigitalOcean - ezEdit</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/deploy.css">
  <link rel="icon" type="image/svg+xml" href="img/logo.svg">
</head>
<body>
  <!-- Header -->
  <header class="app-header">
    <div class="container">
      <div class="header-content">
        <div class="logo-container">
          <a href="dashboard.html">
            <img src="img/logo.svg" alt="ezEdit Logo" class="logo">
            <span class="logo-text">ezEdit</span>
          </a>
        </div>
        <nav class="main-nav">
          <ul>
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="editor.html">Editor</a></li>
            <li><a href="settings.html">Settings</a></li>
            <li><a href="deploy.html" class="active">Deploy</a></li>
          </ul>
        </nav>
        <div class="header-actions">
          <button class="theme-toggle" aria-label="Toggle theme">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
          </button>
          <div class="user-menu-container">
            <button class="user-menu-toggle">
              <span class="user-email">user@example.com</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>
            </button>
            <div class="user-menu">
              <ul>
                <li><a href="settings.html">Settings</a></li>
                <li><a href="settings.html#subscription">Subscription</a></li>
                <li><a href="#" class="logout-btn">Logout</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="deploy-page">
    <div class="container">
      <div class="page-header">
        <h1>Deploy to DigitalOcean</h1>
        <p>Deploy your site to DigitalOcean's App Platform or create a new Droplet</p>
      </div>

      <!-- Connection Status -->
      <div class="connection-status">
        <div class="status-indicator not-connected" id="do-connection-status">
          <span class="status-text">Not connected to DigitalOcean</span>
        </div>
        <button class="btn primary" id="connect-do-btn">Connect Account</button>
      </div>

      <!-- Deployment Options -->
      <div class="deployment-options">
        <div class="option-card">
          <div class="option-header">
            <h2>App Platform</h2>
            <span class="badge recommended">Recommended</span>
          </div>
          <p>Deploy your site to DigitalOcean's App Platform for easy scaling and management.</p>
          <ul class="feature-list">
            <li>Zero configuration deployment</li>
            <li>Automatic HTTPS</li>
            <li>Built-in CI/CD</li>
            <li>Horizontal scaling</li>
          </ul>
          <button class="btn primary deploy-btn" data-type="app-platform" disabled>Deploy to App Platform</button>
        </div>

        <div class="option-card">
          <div class="option-header">
            <h2>Droplet</h2>
            <span class="badge advanced">Advanced</span>
          </div>
          <p>Create a new Droplet for full control over your server environment.</p>
          <ul class="feature-list">
            <li>Full root access</li>
            <li>Custom server configuration</li>
            <li>Choose your OS and stack</li>
            <li>Dedicated resources</li>
          </ul>
          <button class="btn secondary deploy-btn" data-type="droplet" disabled>Create Droplet</button>
        </div>

        <div class="option-card">
          <div class="option-header">
            <h2>Spaces (Storage)</h2>
            <span class="badge">Optional</span>
          </div>
          <p>Create an S3-compatible storage bucket for static assets and backups.</p>
          <ul class="feature-list">
            <li>S3-compatible API</li>
            <li>CDN integration</li>
            <li>Secure file storage</li>
            <li>Automated backups</li>
          </ul>
          <button class="btn secondary deploy-btn" data-type="spaces" disabled>Create Space</button>
        </div>
      </div>

      <!-- Deployment History -->
      <div class="deployment-history">
        <h2>Deployment History</h2>
        <div class="history-empty" id="history-empty">
          <p>No deployments yet. Connect your DigitalOcean account to get started.</p>
        </div>
        <div class="history-table" id="history-table" style="display: none;">
          <table>
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Region</th>
                <th>Status</th>
                <th>Created</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="history-tbody">
              <!-- Deployment history will be populated here -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="app-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-logo">
          <img src="img/logo.svg" alt="ezEdit Logo" class="logo-small">
          <span>ezEdit</span>
        </div>
        <div class="footer-links">
          <a href="terms.html">Terms</a>
          <a href="privacy.html">Privacy</a>
          <a href="help.html">Help</a>
        </div>
        <div class="footer-copyright">
          &copy; 2025 ezEdit. All rights reserved.
        </div>
      </div>
    </div>
  </footer>

  <!-- Modals -->
  <!-- Connect DigitalOcean Modal -->
  <div class="modal" id="connect-do-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Connect DigitalOcean Account</h2>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="connect-do-form">
          <div class="form-group">
            <label for="do-token">API Token</label>
            <input type="password" id="do-token" placeholder="Enter your DigitalOcean API token" required>
            <p class="help-text">
              You can generate an API token in your 
              <a href="https://cloud.digitalocean.com/account/api/tokens" target="_blank">DigitalOcean account settings</a>.
              Make sure to grant both read and write permissions.
            </p>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn primary">Connect Account</button>
            <button type="button" class="btn secondary close-modal">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- App Platform Deploy Modal -->
  <div class="modal" id="app-platform-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Deploy to App Platform</h2>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="app-platform-form">
          <div class="form-group">
            <label for="app-name">App Name</label>
            <input type="text" id="app-name" placeholder="e.g., my-ezedit-app" required>
          </div>
          <div class="form-group">
            <label for="app-region">Region</label>
            <select id="app-region" required>
              <option value="nyc1">New York (NYC1)</option>
              <option value="sfo2">San Francisco (SFO2)</option>
              <option value="ams3">Amsterdam (AMS3)</option>
              <option value="sgp1">Singapore (SGP1)</option>
              <option value="lon1">London (LON1)</option>
              <option value="fra1">Frankfurt (FRA1)</option>
            </select>
          </div>
          <div class="form-group">
            <label for="github-repo">GitHub Repository</label>
            <input type="text" id="github-repo" placeholder="e.g., username/repo" value="Swimhack/ezEdit2025" required>
          </div>
          <div class="form-group">
            <label for="github-branch">Branch</label>
            <input type="text" id="github-branch" placeholder="e.g., main" value="main" required>
          </div>
          <div class="form-group checkbox-group">
            <input type="checkbox" id="create-database" checked>
            <label for="create-database">Create PostgreSQL database</label>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn primary">Deploy App</button>
            <button type="button" class="btn secondary close-modal">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Droplet Deploy Modal -->
  <div class="modal" id="droplet-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Create Droplet</h2>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="droplet-form">
          <div class="form-group">
            <label for="droplet-name">Droplet Name</label>
            <input type="text" id="droplet-name" placeholder="e.g., ezedit-server" required>
          </div>
          <div class="form-group">
            <label for="droplet-region">Region</label>
            <select id="droplet-region" required>
              <option value="nyc1">New York (NYC1)</option>
              <option value="sfo2">San Francisco (SFO2)</option>
              <option value="ams3">Amsterdam (AMS3)</option>
              <option value="sgp1">Singapore (SGP1)</option>
              <option value="lon1">London (LON1)</option>
              <option value="fra1">Frankfurt (FRA1)</option>
            </select>
          </div>
          <div class="form-group">
            <label for="droplet-size">Size</label>
            <select id="droplet-size" required>
              <option value="s-1vcpu-1gb">Basic: 1 vCPU, 1GB RAM ($5/mo)</option>
              <option value="s-1vcpu-2gb">Standard: 1 vCPU, 2GB RAM ($10/mo)</option>
              <option value="s-2vcpu-2gb">Enhanced: 2 vCPU, 2GB RAM ($15/mo)</option>
              <option value="s-2vcpu-4gb">Performance: 2 vCPU, 4GB RAM ($20/mo)</option>
            </select>
          </div>
          <div class="form-group">
            <label for="droplet-image">Image</label>
            <select id="droplet-image" required>
              <option value="ubuntu-20-04-x64">Ubuntu 20.04</option>
              <option value="debian-11-x64">Debian 11</option>
              <option value="centos-stream-9-x64">CentOS Stream 9</option>
              <option value="docker-20-04">Ubuntu 20.04 with Docker</option>
              <option value="lamp-20-04">LAMP on Ubuntu 20.04</option>
              <option value="lemp-20-04">LEMP on Ubuntu 20.04</option>
            </select>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn primary">Create Droplet</button>
            <button type="button" class="btn secondary close-modal">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Spaces Deploy Modal -->
  <div class="modal" id="spaces-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Create Space</h2>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="spaces-form">
          <div class="form-group">
            <label for="space-name">Space Name</label>
            <input type="text" id="space-name" placeholder="e.g., ezedit-assets" required>
            <p class="help-text">Space names must be unique across all DigitalOcean Spaces.</p>
          </div>
          <div class="form-group">
            <label for="space-region">Region</label>
            <select id="space-region" required>
              <option value="nyc3">New York (NYC3)</option>
              <option value="sfo2">San Francisco (SFO2)</option>
              <option value="ams3">Amsterdam (AMS3)</option>
              <option value="sgp1">Singapore (SGP1)</option>
              <option value="fra1">Frankfurt (FRA1)</option>
            </select>
          </div>
          <div class="form-group checkbox-group">
            <input type="checkbox" id="cdn-enabled" checked>
            <label for="cdn-enabled">Enable CDN</label>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn primary">Create Space</button>
            <button type="button" class="btn secondary close-modal">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Deployment Success Modal -->
  <div class="modal" id="deploy-success-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Deployment Successful</h2>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="success-message">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="success-icon"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
          <h3>Your deployment has been initiated!</h3>
          <p id="success-details">Your deployment is now being set up. This process may take a few minutes to complete.</p>
          <div class="deployment-info" id="deployment-info">
            <!-- Deployment info will be populated here -->
          </div>
        </div>
        <div class="form-actions">
          <button type="button" class="btn primary" id="view-deployment-btn">View Deployment</button>
          <button type="button" class="btn secondary close-modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/config.js"></script>
  <script src="js/memory-service.js"></script>
  <script src="js/api-service.js"></script>
  <script src="js/email-service.js"></script>
  <script src="js/subscription.js"></script>
  <script src="js/digitalocean-service.js"></script>
  <script src="js/app.js"></script>
  <script src="js/deploy.js"></script>
</body>
</html>
